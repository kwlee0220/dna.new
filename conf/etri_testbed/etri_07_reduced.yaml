id: etri:07

camera:
  # uri: data/2021/etri_07.mp4
  # uri: data/2022/crops/etri_07_crop.mp4
  uri: data/2022/etri_07_hot.mp4
  # uri: data/2022/etri_071.mp4
  sync: False
  # begin_frame: 350
  # end_frame: 200
  # open_ts: 590
  # open_ts: 0

tracker:
  draw: ['tracks', 'track_zones']
  detection_min_size: [30, 30]
  max_age: 30
  track_zones:
    - [[268, 485], [669, 450], [1194, 299], [1408, 313], [1362, 488], [1807, 595], [1814, 930], [4, 927], [0, 698]]
  exit_zones:
    - [[0, 704], [271, 485], [203, 445], [2, 587]]      # 정문 방향 출구
    - [1148, 200, 1415, 310]    # 테니스장 출구
    - [600, 930, 1918, 1080]    # 테니스장 뒷쪽 출구

sql_connection: &postgresql_connection
  host: localhost
  port: 5432
  dbname: dna
  user: dna
  password: urc2004

local_kafka_connection: &local_kafka_connection
  bootstrap_servers: [localhost:9092]
dna_kafka_connection: &dna_kafka_connection
  bootstrap_servers: [kafka01:9092, kafka02:9092, kafka03:9092]

publishing:
  # tick_interval: 1.0
  refine_tracks:
    buffer_size: 10
    buffer_timeout: 1.5
  # min_path_length: 10
  attach_world_coordinates:
    camera_geometry: regions/etri_testbed/etri_testbed.json
    camera_index: 3
  zone_pipeline:
    zones:
      A: [[8, 613], [215, 509], [661, 507], [143, 840], [8, 613]]
      D: [[686, 481], [1242, 584], [1407, 320], [1154, 315], [686, 481]]
      E: [[209, 975], [356, 806], [1035, 631], [1598, 645], [1644, 980], [209, 975]]
    motions:
      'AD': 'AD'
      'AE': 'AE'
      'DA': 'DA'
      'EA': 'EA'
  plugins:
    publish_tracks:
      <<: *local_kafka_connection
      topic: 'track-events'
    publish_motions:
      <<: *local_kafka_connection
      topic: 'track-motions'
    publish_features:
      distinct_distance: 0.2
      min_crop_size: 80x60
      <<: *local_kafka_connection
      topic: 'track-features'